{"is_source_file": true, "format": "Python", "description": "This is a FastAPI application implementing an administrative API for an event management platform. It provides endpoints for health checks, dashboard summaries, user management, event and venue management, system configuration, analytics, compliance, and audit logging. The code uses in-memory data stores for demo purposes, with dependencies enforcing RBAC placeholders.", "external_files": ["os", "datetime", "typing", "fastapi", "pydantic", "starlette.responses"], "external_methods": ["fastapi.FastAPI", "fastapi.Depends", "fastapi.Header", "fastapi.Path", "fastapi.Query", "fastapi.HTTPException", "fastapi.status", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "starlette.responses.JSONResponse"], "published": ["health_check", "websocket_usage_note", "admin_dashboard_summary", "platform_health", "admin_list_users", "admin_get_user", "admin_update_roles", "admin_delete_user", "admin_list_events", "admin_get_event", "admin_update_event", "admin_delete_event", "admin_list_venues", "admin_get_venue", "admin_update_venue", "admin_delete_venue", "list_system_settings", "upsert_system_settings", "delete_system_setting", "analytics_summary", "event_analytics", "generate_compliance_report", "list_policies", "list_audit_logs"], "classes": [{"name": "AdminIdentity", "description": "Holds the identity and roles of an admin user."}, {"name": "Profile", "description": "User profile data with optional avatar and contact info."}, {"name": "UserPublic", "description": "Represents publicly visible user data."}, {"name": "RoleUpdate", "description": "Schema for assigning roles to users."}, {"name": "SystemSetting", "description": "Key-value pair for configuration."}, {"name": "SystemSettingsUpsert", "description": "Batch schema for upserting system settings."}, {"name": "EventPublic", "description": "Public event data model."}, {"name": "VenuePublic", "description": "Public venue data model."}, {"name": "DashboardSummary", "description": "Aggregated platform summary for admin dashboard."}, {"name": "PlatformHealth", "description": "Snapshot of overall platform and component health."}, {"name": "AnalyticsSummary", "description": "Summary of platform analytics over a period."}, {"name": "ComplianceReport", "description": "Report on compliance status and findings."}, {"name": "AuditLogEntry", "description": "Single audit log record."}], "methods": [{"name": "AdminIdentity require_admin( x_user_id: Optional[str] = Header(default=None, alias=\"x-user-id\"), x_user_roles: Optional[str] = Header(default=None, alias=\"x-user-roles\"), )", "description": "Dependable function to verify admin role from headers.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] health_check()", "description": "Basic health endpoint returning service status.", "scope": "", "scopeKind": ""}, {"name": "websocket_usage_note", "description": "Documentation note about WebSocket capabilities."}, {"name": "DashboardSummary admin_dashboard_summary(_: AdminIdentity = Depends(require_admin))", "description": "Provides high-level totals for key platform entities.", "scope": "", "scopeKind": ""}, {"name": "PlatformHealth platform_health(_: AdminIdentity = Depends(require_admin))", "description": "Returns a snapshot of component health statuses.", "scope": "", "scopeKind": ""}, {"name": "List[UserPublic] admin_list_users(_: AdminIdentity = Depends(require_admin))", "description": "Returns list of users.", "scope": "", "scopeKind": ""}, {"name": "UserPublic admin_get_user( user_id: str = Path(..., description=\"User ID\"), _: AdminIdentity = Depends(require_admin), )", "description": "Retrieves a specific user by ID.", "scope": "", "scopeKind": ""}, {"name": "UserPublic admin_update_roles( user_id: str = Path(..., description=\"User ID\"), body: RoleUpdate = ..., admin: AdminIdentity = Depends(require_admin), )", "description": "Updates roles assigned to a user.", "scope": "", "scopeKind": ""}, {"name": "JSONResponse admin_delete_user( user_id: str = Path(..., description=\"User ID\"), admin: AdminIdentity = Depends(require_admin), )", "description": "Removes a user from the system.", "scope": "", "scopeKind": ""}, {"name": "List[EventPublic] admin_list_events(_: AdminIdentity = Depends(require_admin))", "description": "Lists all events.", "scope": "", "scopeKind": ""}, {"name": "EventPublic admin_get_event( event_id: str = Path(..., description=\"Event ID\"), _: AdminIdentity = Depends(require_admin), )", "description": "Gets details of a specific event.", "scope": "", "scopeKind": ""}, {"name": "EventPublic admin_update_event( event_id: str = Path(..., description=\"Event ID\"), body: EventUpdate = ..., admin: AdminIdentity = Depends(require_admin), )", "description": "Modifies event details.", "scope": "", "scopeKind": ""}, {"name": "JSONResponse admin_delete_event( event_id: str = Path(..., description=\"Event ID\"), admin: AdminIdentity = Depends(require_admin), )", "description": "Deletes an event.", "scope": "", "scopeKind": ""}, {"name": "List[VenuePublic] admin_list_venues(_: AdminIdentity = Depends(require_admin))", "description": "Lists all venues.", "scope": "", "scopeKind": ""}, {"name": "VenuePublic admin_get_venue( venue_id: str = Path(..., description=\"Venue ID\"), _: AdminIdentity = Depends(require_admin), )", "description": "Retrieve venue details.", "scope": "", "scopeKind": ""}, {"name": "VenuePublic admin_update_venue( venue_id: str = Path(..., description=\"Venue ID\"), body: VenueUpdate = ..., admin: AdminIdentity = Depends(require_admin), )", "description": "Update venue information.", "scope": "", "scopeKind": ""}, {"name": "JSONResponse admin_delete_venue( venue_id: str = Path(..., description=\"Venue ID\"), admin: AdminIdentity = Depends(require_admin), )", "description": "Deletes a venue.", "scope": "", "scopeKind": ""}, {"name": "List[SystemSetting] list_system_settings(_: AdminIdentity = Depends(require_admin))", "description": "Fetch all system configurations.", "scope": "", "scopeKind": ""}, {"name": "upsert_system_settings", "description": "Create/update multiple system settings."}, {"name": "JSONResponse delete_system_setting( key: str = Path(..., description=\"Setting key\"), admin: AdminIdentity = Depends(require_admin), )", "description": "Remove a specific system setting.", "scope": "", "scopeKind": ""}, {"name": "AnalyticsSummary analytics_summary( period: Literal[\"24h\", \"7d\", \"30d\"] = Query(\"7d\", description=\"Aggregation period\"), _: AdminIdentity = Depends(require_admin), )", "description": "Provides a summary of platform analytics.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] event_analytics( event_id: str = Path(..., description=\"Event ID\"), _: AdminIdentity = Depends(require_admin), )", "description": "Returns statistics for a specific event.", "scope": "", "scopeKind": ""}, {"name": "ComplianceReport generate_compliance_report( scope: Literal[\"gdpr\", \"pci\", \"soc2\"] = Query(..., description=\"Compliance scope\"), _: AdminIdentity = Depends(require_admin), )", "description": "Generate a compliance report for specified scope.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] list_policies(_: AdminIdentity = Depends(require_admin))", "description": "Lists compliance policies and versions.", "scope": "", "scopeKind": ""}, {"name": "List[AuditLogEntry] list_audit_logs( limit: int = Query(50, ge=1, le=500, description=\"Max logs to return\"), since_seconds: Optional[int] = Query(None, ge=1, description=\"Return entries since N seconds ago\"), _: AdminIdentity = Depends(require_admin), )", "description": "Lists audit log entries, with filtering options.", "scope": "", "scopeKind": ""}, {"name": "None _audit(actor_id: str, action: str, target: str, metadata: Optional[Dict[str, Any]] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["Depends(require_admin)", "health_check", "websocket_usage_note", "admin_dashboard_summary", "platform_health", "admin_list_users", "admin_get_user", "admin_update_roles", "admin_delete_user", "admin_list_events", "admin_get_event", "admin_update_event", "admin_delete_event", "admin_list_venues", "admin_get_venue", "admin_update_venue", "admin_delete_venue", "list_system_settings", "upsert_system_settings", "delete_system_setting", "analytics_summary", "event_analytics", "generate_compliance_report", "list_policies", "list_audit_logs"], "search-terms": ["AdminService", "FastAPI", "RBAC", "admin", "event management", "system configuration", "analytics", "compliance", "audit logs", "health check"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "0930faa20189d540dd2134d7e9454b6c52c75243", "revision_history": [{"8": "190366b71adb83a395aa9148a110f35e0e572c5b"}, {"10": "0930faa20189d540dd2134d7e9454b6c52c75243"}], "ctags": [{"_type": "tag", "name": "AdminIdentity", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class AdminIdentity(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AnalyticsSummary", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class AnalyticsSummary(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuditLogEntry", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class AuditLogEntry(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ComplianceReport", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class ComplianceReport(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DashboardSummary", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class DashboardSummary(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "EventPublic", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class EventPublic(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "EventUpdate", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class EventUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PlatformHealth", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class PlatformHealth(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Profile", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class Profile(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RoleUpdate", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class RoleUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SystemSetting", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class SystemSetting(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SystemSettingsUpsert", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class SystemSettingsUpsert(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserPublic", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class UserPublic(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "VenuePublic", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class VenuePublic(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "VenueUpdate", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^class VenueUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_FAKE_AUDIT", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^_FAKE_AUDIT: List[AuditLogEntry] = []$/", "language": "Python", "typeref": "typename:List[AuditLogEntry]", "kind": "variable"}, {"_type": "tag", "name": "_FAKE_EVENTS", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^_FAKE_EVENTS: Dict[str, EventPublic] = {$/", "language": "Python", "typeref": "typename:Dict[str, EventPublic]", "kind": "variable"}, {"_type": "tag", "name": "_FAKE_SETTINGS", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^_FAKE_SETTINGS: Dict[str, SystemSetting] = {$/", "language": "Python", "typeref": "typename:Dict[str, SystemSetting]", "kind": "variable"}, {"_type": "tag", "name": "_FAKE_USERS", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^_FAKE_USERS: Dict[str, UserPublic] = {$/", "language": "Python", "typeref": "typename:Dict[str, UserPublic]", "kind": "variable"}, {"_type": "tag", "name": "_FAKE_VENUES", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^_FAKE_VENUES: Dict[str, VenuePublic] = {$/", "language": "Python", "typeref": "typename:Dict[str, VenuePublic]", "kind": "variable"}, {"_type": "tag", "name": "_audit", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def _audit(actor_id: str, action: str, target: str, metadata: Optional[Dict[str, Any]] = None) -/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(actor_id: str, action: str, target: str, metadata: Optional[Dict[str, Any]] = None)"}, {"_type": "tag", "name": "action", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    action: str = Field(..., description=\"Action performed\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuditLogEntry", "scopeKind": "class"}, {"_type": "tag", "name": "actor_id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    actor_id: str = Field(..., description=\"Admin\\/user id who performed the action\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuditLogEntry", "scopeKind": "class"}, {"_type": "tag", "name": "admin_dashboard_summary", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_dashboard_summary(_: AdminIdentity = Depends(require_admin)) -> DashboardSummary:$/", "language": "Python", "typeref": "typename:DashboardSummary", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "admin_delete_event", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_delete_event($/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "( event_id: str = Path(..., description=\"Event ID\"), admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_delete_user", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_delete_user($/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "( user_id: str = Path(..., description=\"User ID\"), admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_delete_venue", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_delete_venue($/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "( venue_id: str = Path(..., description=\"Venue ID\"), admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_get_event", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_get_event($/", "language": "Python", "typeref": "typename:EventPublic", "kind": "function", "signature": "( event_id: str = Path(..., description=\"Event ID\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_get_user", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_get_user($/", "language": "Python", "typeref": "typename:UserPublic", "kind": "function", "signature": "( user_id: str = Path(..., description=\"User ID\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_get_venue", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_get_venue($/", "language": "Python", "typeref": "typename:VenuePublic", "kind": "function", "signature": "( venue_id: str = Path(..., description=\"Venue ID\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_list_events", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_list_events(_: AdminIdentity = Depends(require_admin)) -> List[EventPublic]:$/", "language": "Python", "typeref": "typename:List[EventPublic]", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "admin_list_users", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_list_users(_: AdminIdentity = Depends(require_admin)) -> List[UserPublic]:$/", "language": "Python", "typeref": "typename:List[UserPublic]", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "admin_list_venues", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_list_venues(_: AdminIdentity = Depends(require_admin)) -> List[VenuePublic]:$/", "language": "Python", "typeref": "typename:List[VenuePublic]", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "admin_update_event", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_update_event($/", "language": "Python", "typeref": "typename:EventPublic", "kind": "function", "signature": "( event_id: str = Path(..., description=\"Event ID\"), body: EventUpdate = ..., admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_update_roles", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_update_roles($/", "language": "Python", "typeref": "typename:UserPublic", "kind": "function", "signature": "( user_id: str = Path(..., description=\"User ID\"), body: RoleUpdate = ..., admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "admin_update_venue", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def admin_update_venue($/", "language": "Python", "typeref": "typename:VenuePublic", "kind": "function", "signature": "( venue_id: str = Path(..., description=\"Venue ID\"), body: VenueUpdate = ..., admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "allowed_origins", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^allowed_origins = os.getenv(\"CORS_ALLOW_ORIGINS\", \"*\").split(\",\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "analytics_summary", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def analytics_summary($/", "language": "Python", "typeref": "typename:AnalyticsSummary", "kind": "function", "signature": "( period: Literal[\"24h\", \"7d\", \"30d\"] = Query(\"7d\", description=\"Aggregation period\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "avatar_url", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    avatar_url: str = Field(\"\", description=\"URL to profile avatar\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    bio: str = Field(\"\", description=\"Short biography or description\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "bookings_total", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    bookings_total: int = Field(..., description=\"Total bookings\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "DashboardSummary", "scopeKind": "class"}, {"_type": "tag", "name": "capacity", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    capacity: Optional[int] = Field(default=None, description=\"Capacity\")$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "VenueUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "capacity", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    capacity: int = Field(..., description=\"Capacity\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "VenuePublic", "scopeKind": "class"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    city: Optional[str] = Field(default=None, description=\"City\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "VenueUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "city", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    city: str = Field(..., description=\"City\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "VenuePublic", "scopeKind": "class"}, {"_type": "tag", "name": "components", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    components: Dict[str, Literal[\"healthy\", \"degraded\", \"down\"]] = Field(..., description=\"Comp/", "language": "Python", "typeref": "typename:Dict[str, Literal[\"healthy\", \"degraded\", \"down\"]]", "kind": "variable", "scope": "PlatformHealth", "scopeKind": "class"}, {"_type": "tag", "name": "country", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    country: Optional[str] = Field(default=None, description=\"Country\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "VenueUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "country", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    country: str = Field(..., description=\"Country\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "VenuePublic", "scopeKind": "class"}, {"_type": "tag", "name": "delete_system_setting", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def delete_system_setting($/", "language": "Python", "typeref": "typename:JSONResponse", "kind": "function", "signature": "( key: str = Path(..., description=\"Setting key\"), admin: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(default=None, description=\"Optional description\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "SystemSetting", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    email: str = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "ends_at", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    ends_at: Optional[datetime] = Field(default=None, description=\"End datetime\")$/", "language": "Python", "typeref": "typename:Optional[datetime]", "kind": "variable", "scope": "EventPublic", "scopeKind": "class"}, {"_type": "tag", "name": "event_analytics", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def event_analytics($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( event_id: str = Path(..., description=\"Event ID\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "events_total", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    events_total: int = Field(..., description=\"Total events\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "DashboardSummary", "scopeKind": "class"}, {"_type": "tag", "name": "findings", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    findings: List[str] = Field(default_factory=list, description=\"List of notable findings\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "ComplianceReport", "scopeKind": "class"}, {"_type": "tag", "name": "first_name", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    first_name: str = Field(\"\", description=\"First name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "generate_compliance_report", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def generate_compliance_report($/", "language": "Python", "typeref": "typename:ComplianceReport", "kind": "function", "signature": "( scope: Literal[\"gdpr\", \"pci\", \"soc2\"] = Query(..., description=\"Compliance scope\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "generated_at", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    generated_at: datetime = Field(..., description=\"Report generation time\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "ComplianceReport", "scopeKind": "class"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def health_check() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Audit entry id\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AuditLogEntry", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Event ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "EventPublic", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"User ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Venue ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "VenuePublic", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    is_active: bool = Field(..., description=\"Is the user active\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "is_verified", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    is_verified: bool = Field(..., description=\"Has the user's email been verified\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    key: str = Field(..., description=\"Setting key\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SystemSetting", "scopeKind": "class"}, {"_type": "tag", "name": "last_name", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    last_name: str = Field(\"\", description=\"Last name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "list_audit_logs", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def list_audit_logs($/", "language": "Python", "typeref": "typename:List[AuditLogEntry]", "kind": "function", "signature": "( limit: int = Query(50, ge=1, le=500, description=\"Max logs to return\"), since_seconds: Optional[int] = Query(None, ge=1, description=\"Return entries since N seconds ago\"), _: AdminIdentity = Depends(require_admin), )"}, {"_type": "tag", "name": "list_policies", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def list_policies(_: AdminIdentity = Depends(require_admin)) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "list_system_settings", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def list_system_settings(_: AdminIdentity = Depends(require_admin)) -> List[SystemSetting]:$/", "language": "Python", "typeref": "typename:List[SystemSetting]", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    metadata: Dict[str, Any] = Field(default_factory=dict, description=\"Additional details\")$/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "AuditLogEntry", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    name: Optional[str] = Field(default=None, description=\"Venue name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "VenueUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    name: str = Field(..., description=\"Venue name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "VenuePublic", "scopeKind": "class"}, {"_type": "tag", "name": "new_users", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    new_users: int = Field(..., description=\"New registered users in period\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "AnalyticsSummary", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "organizer_id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    organizer_id: str = Field(..., description=\"Organizer user id\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "EventPublic", "scopeKind": "class"}, {"_type": "tag", "name": "passed", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    passed: bool = Field(..., description=\"Overall compliance result\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "ComplianceReport", "scopeKind": "class"}, {"_type": "tag", "name": "period", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    period: Literal[\"24h\", \"7d\", \"30d\"] = Field(..., description=\"Aggregation period\")$/", "language": "Python", "typeref": "typename:Literal[\"24h\", \"7d\", \"30d\"]", "kind": "variable", "scope": "AnalyticsSummary", "scopeKind": "class"}, {"_type": "tag", "name": "phone", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    phone: str = Field(\"\", description=\"Phone number in E.164 if possible\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "platform_health", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def platform_health(_: AdminIdentity = Depends(require_admin)) -> PlatformHealth:$/", "language": "Python", "typeref": "typename:PlatformHealth", "kind": "function", "signature": "(_: AdminIdentity = Depends(require_admin))"}, {"_type": "tag", "name": "profile", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    profile: Optional[Profile] = Field(default=None, description=\"User profile\")$/", "language": "Python", "typeref": "typename:Optional[Profile]", "kind": "variable", "scope": "UserPublic", "scopeKind": "class"}, {"_type": "tag", "name": "report_id", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^    report_id: str = Field(..., description=\"Report id\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ComplianceReport", "scopeKind": "class"}, {"_type": "tag", "name": "require_admin", "path": "/home/kavia/workspace/code-generation/event-booking-and-management-app-13870-14382/AdminService/src/api/main.py", "pattern": "/^def require_admin($/", "language": "Python", "typeref": "typename:AdminIdentity", "kind": "function", "signature": "( x_user_id: Optional[str] = Header(default=None, alias=\"x-user-id\"), x_user_roles: Optional[str] = Header(default=None, alias=\"x-user-roles\"), )"}], "hash": "e90f9a92204a628f601f106fa257e365", "format-version": 4, "code-base-name": "AdminService", "filename": "AdminService/src/api/main.py", "fields": [{"name": "List[AuditLogEntry] _FAKE_AUDIT", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, EventPublic] _FAKE_EVENTS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, SystemSetting] _FAKE_SETTINGS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, UserPublic] _FAKE_USERS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, VenuePublic] _FAKE_VENUES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str action", "scope": "AuditLogEntry", "scopeKind": "class", "description": "unavailable"}, {"name": "str actor_id", "scope": "AuditLogEntry", "scopeKind": "class", "description": "unavailable"}, {"name": "allowed_origins = os.getenv(\"CORS_ALLOW_ORIGINS\", \"*\").split(\",\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str avatar_url", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "str bio", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "int bookings_total", "scope": "DashboardSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] capacity", "scope": "VenueUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "int capacity", "scope": "VenuePublic", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] city", "scope": "VenueUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str city", "scope": "VenuePublic", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Literal[\"healthy\", \"degraded\", \"down\"]] components", "scope": "PlatformHealth", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] country", "scope": "VenueUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str country", "scope": "VenuePublic", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "SystemSetting", "scopeKind": "class", "description": "unavailable"}, {"name": "str email", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[datetime] ends_at", "scope": "EventPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "int events_total", "scope": "DashboardSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] findings", "scope": "ComplianceReport", "scopeKind": "class", "description": "unavailable"}, {"name": "str first_name", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime generated_at", "scope": "ComplianceReport", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "AuditLogEntry", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_active", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_verified", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "str key", "scope": "SystemSetting", "scopeKind": "class", "description": "unavailable"}, {"name": "str last_name", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] metadata", "scope": "AuditLogEntry", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] name", "scope": "VenueUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str name", "scope": "VenuePublic", "scopeKind": "class", "description": "unavailable"}, {"name": "int new_users", "scope": "AnalyticsSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str organizer_id", "scope": "EventPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "bool passed", "scope": "ComplianceReport", "scopeKind": "class", "description": "unavailable"}, {"name": "Literal[\"24h\", \"7d\", \"30d\"] period", "scope": "AnalyticsSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "str phone", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Profile] profile", "scope": "UserPublic", "scopeKind": "class", "description": "unavailable"}, {"name": "str report_id", "scope": "ComplianceReport", "scopeKind": "class", "description": "unavailable"}]}